<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Ace HTML Editor with Preview & Download</title>
	<style>
		body {
			font-family: sans-serif;
			padding: 20px;
		}
		
		#editor {
			height: 400px;
			width: 100%;
			border: 1px solid #ccc;
			font-size: 16px;
			margin-bottom: 10px;
		}
		
		.button-group {
			margin-bottom: 20px;
		}
		
		button {
			padding: 10px 20px;
			font-size: 16px;
			margin-right: 10px;
			cursor: pointer;
		}
		
		#preview {
			width: 100%;
			height: 300px;
			border: 1px solid #ccc;
		}
	</style>
</head>

<body>
	<h2>HTML Editor (Ace) with Preview & Download</h2>
	<div id="editor"></div>
	<div class="button-group">
		<button id="runBtn">Run Code</button>
		<button id="downloadBtn">Download HTML</button>
	</div>
	<h3>Output:</h3>
	<iframe id="preview"></iframe>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.32.3/ace.js"></script>
	<script>
		const editor = ace.edit("editor");
		editor.setTheme("ace/theme/monokai");
		editor.session.setMode("ace/mode/html");
		editor.setOptions({
			enableBasicAutocompletion: true
			, enableSnippets: true
			, enableLiveAutocompletion: false
		});
		const defaultHTML = `<!DOCTYPE html>
<html>
<head>
  <style>
    body { font-family: sans-serif; text-align: center; margin-top: 50px; }
    h1 { color: green; }
  </style>
</head>
<body>
  <h1>Hello World!</h1>
  <p>This is your HTML output.</p>
</body>
</html>`;
		editor.setValue(defaultHTML, -1);
		document.getElementById('runBtn').addEventListener('click', () => {
			const htmlCode = editor.getValue();
			const previewFrame = document.getElementById('preview');
			const doc = previewFrame.contentDocument || previewFrame.contentWindow.document;
			doc.open();
			doc.write(htmlCode);
			doc.close();
		});
		document.getElementById('downloadBtn').addEventListener('click', () => {
			const htmlCode = editor.getValue();
			const blob = new Blob([htmlCode], {
				type: "text/html"
			});
			const url = URL.createObjectURL(blob);
			const a = document.createElement("a");
			a.href = url;
			a.download = "my-html-code.html";
			a.click();
			URL.revokeObjectURL(url); // Cleanup
		});
	</script>
</body>

</html>